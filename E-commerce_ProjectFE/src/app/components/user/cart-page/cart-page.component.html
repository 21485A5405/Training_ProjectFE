<div class="cart-container">
  
  <div class="my-orders-section">
    <button class="my-orders-btn" (click)="navigateToOrders()">
      <i class="fas fa-list-alt"></i> My Orders
    </button>
  </div>

  <div class="cart-content">
    
    <div class="cart-items-section">
      <div class="cart-header">
        <h2>Shopping Cart</h2>
        <span class="item-count">{{ totalItemsCount }} Items</span>
      </div>

      
      <div *ngIf="isLoading" class="loading-state">
        <p>Loading cart items...</p>
      </div>

      
      <div class="column-headers" *ngIf="!isLoading && cartItems.length > 0">
        <div class="product-header">PRODUCT DETAILS</div>
        <div class="quantity-header">QUANTITY</div>
        <div class="price-header">PRICE</div>
        <div class="total-header">TOTAL</div>
      </div>

      
      <div class="cart-items-list" *ngIf="!isLoading">
        <div *ngIf="cartItems && cartItems.length > 0; else emptyCart">
          <div *ngFor="let item of cartItems" class="cart-item">
            
            <div class="product-details">
              <img [src]="item.product.productImageURL" [alt]="item.product.productName" class="product-image">
              <div class="product-info">
                <h3>{{ item.product.productName }}</h3>
                <p class="product-category">{{ item.product.productDescription }}</p>
            
                
                <div class="product-meta">
                  <div class="id-badges">
                    <span class="id-badge cart-id">
                      <i class="fas fa-shopping-cart"></i>
                      Cart ID : {{ item.cartItemId }}
                    </span>
                    <span class="id-badge product-id">
                      <i class="fas fa-box"></i>
                      Product ID : {{ item.product.productId }}
                    </span>
                  </div>
                </div>
            
                <button class="remove-btn" (click)="deleteCartItem(item.cartItemId)">
                  <i class="fas fa-trash-alt"></i> Remove
                </button>
              </div>
            </div>
            
            <div class="quantity-controls">
              <button class="qty-btn minus" (click)="decreaseQuantity(item)">âˆ’</button>
              <span class="qty-display">{{ item.productQuantity }}</span>
              <button class="qty-btn plus" (click)="increaseQuantity(item)">+</button>
            </div>
            <div class="item-price">{{ item.product.productPrice |currency:'INR'}}</div>
            <div class="item-total">{{ item.totalPrice |currency:'INR' }}</div>
            <div class="item-selection">
              <label>
                <input type="checkbox" (change)="toggleSelection(item, $event)">
                Select
              </label>
            </div>
          </div>
        </div>
      </div>

      
      <ng-template #emptyCart>
        <div class="empty-cart-message">
          <p>Your cart is empty ðŸ˜•</p>
        </div>
      </ng-template>

      
      <div class="continue-shopping" *ngIf="!isLoading && cartItems.length > 0">
        <button class="continue-btn" (click)="goToHome()">
          <i class="fas fa-arrow-left" ></i> Continue Shopping
        </button>
      </div>
    </div>

    
    <div class="order-summary" *ngIf="!isLoading && cartItems.length > 0">
      <h3>Order Summary</h3>
      
      <div class="summary-row">
        <span>ITEMS {{ selectedItemsCount > 0 ? selectedItemsCount : totalItemsCount }}</span>
        <span>{{ selectedItemsCount > 0 ? selectedItemsTotal.toFixed(2) : totalPrice.toFixed(2) |currency:'INR' }}</span>
      </div>

      
      <div class="address-section" *ngIf="selectedItems.length > 0">
        <div class="summary-row">
          <span>SHIPPING ADDRESS</span>
        </div>
        <div class="address-dropdown">
          <select class="form-control" [(ngModel)]="selectedAddressId">
            <option value="">-- Select an address --</option>
            <option *ngFor="let address of userAddresses" [value]="address.addressId">
              {{ address.fullAddress }}
            </option>
          </select>
        </div>
      </div>

      <div class="shipping-section">
        <div class="summary-row">
          <span>SHIPPING</span>
        </div>
        <div class="shipping-option">
          <select class="shipping-select" (change)="onShippingChange($event)">
            <option value="5">Standard Delivery - â‚¹5.00</option>
            <option value="10">Express Delivery - â‚¹10.00</option>
            <option value="15">Overnight Delivery - â‚¹15.00</option>
          </select>
        </div>
      </div>

      
      <div class="payment-section" *ngIf="selectedAddressId">
        <div class="summary-row">
          <span>PAYMENT METHOD</span>
        </div>
        <div class="payment-dropdown">
          <select [(ngModel)]="selectedPaymentMethod">
            <option value="" disabled>Select a method</option>
            <option *ngFor="let method of paymentMethods" [ngValue]="method">
              {{ method.type }} - {{ method.value }}
            </option>
          </select>
        </div>
      </div>
      <div class="total-section">
        <div class="summary-row total-row">
          <span>TOTAL COST</span>
          <span>{{ selectedItemsCount > 0 ? getFinalTotal().toFixed(2) : getAllItemsTotal().toFixed(2) |currency:'INR' }}</span>
        </div>
      </div>

      <button class="checkout-btn" 
              (click)="placeOrder()" 
              [disabled]="!selectedPaymentMethod || selectedItems.length === 0">
        CHECKOUT
      </button>
    </div>
  </div>
</div>