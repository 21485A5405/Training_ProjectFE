<div class="top-bar">
  <button class="btn add-btn" (click)="openAddModal()">Add Product</button>
</div>

<div class="product-table-container">
  <table class="product-table">
    <thead>
      <tr>
        <th>
        </th>
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Categories</th>
        <th>Price</th>
        <th>Product Quantity</th>
        <th>Stock Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products" class="product-row">
        <td>
        </td>
        <td class="product-id">{{ product.productId }}</td>
        <td class="product-name-cell">
          <div class="product-name-wrapper">
            <img [src]="product.productImageURL" [alt]="product.productName" class="product-image">
            <span class="product-name">{{ product.productName }}</span>
          </div>
        </td>
        <td class="product-category">{{ product.productCategory }}</td>
        <td class="product-price">â‚¹{{ product.productPrice | number:'1.0-0' }}</td>
        <td class="product-quantity">
          <span class="quantity-number" [ngClass]="{
            'high-quantity': product.productQuantity > 16,
            'medium-quantity': product.productQuantity > 0 && product.productQuantity <= 15,
            'zero-quantity': product.productQuantity === 0
          }">
            {{ product.productQuantity }}
          </span>
        </td>
        <td class="stock-status">
          <span class="status-badge" [ngClass]="{
            'in-stock': product.productQuantity > 16,
            'low-stock': product.productQuantity > 0 && product.productQuantity <= 15,
            'sold-out': product.productQuantity === 0
          }">
            {{ getStockStatus(product.productQuantity) }}
          </span>
        </td>
        <td class="action-cell">
          <button class="btn action-btn update-btn" (click)="openUpdateModal(product)" title="Edit">
            <i class="fas fa-edit icon-style"></i>
          </button>
          <button class="btn action-btn delete-btn" (click)="removeProduct(product.productId)" title="Delete">
            <i class="fas fa-trash icon-style"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="modal" *ngIf="showAddModal">
  <div class="modal-content">
    <h2>Add New Product</h2>
    <form (ngSubmit)="submitNewProduct()">
      <label>Name:</label>
      <input type="text" [(ngModel)]="newProduct.productName" name="newName" required />
      
      <label>Description:</label>
      <textarea [(ngModel)]="newProduct.productDescription" name="newDesc"></textarea>
      
      <label>Price:</label>
      <input type="number" [(ngModel)]="newProduct.productPrice" name="newPrice" required />
      
      <label>Category:</label>
      <input type="text" [(ngModel)]="newProduct.productCategory" name="newCategory" required />
      
      <label>Quantity:</label>
      <input type="number" [(ngModel)]="newProduct.productQuantity" name="newQuantity" required />
      
      <label>Image URL:</label>
      <input type="text" [(ngModel)]="newProduct.productImageURL" name="newImage" required />
      
      <div class="modal-actions">
        <button type="submit" class="btn save-btn">Add</button>
        <button type="button" class="btn cancel-btn" (click)="closeAddModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Update Product Modal -->
<div class="modal" *ngIf="showModal">
  <div class="modal-content">
    <h2>Update Product</h2>
    <form (ngSubmit)="submitUpdate()">
      <label>Name:</label>
      <input type="text" [(ngModel)]="selectedProduct.productName" name="name" required />

      <label>Description:</label>
      <textarea [(ngModel)]="selectedProduct.productDescription" name="desc"></textarea>

      <label>Price:</label>
      <input type="number" [(ngModel)]="selectedProduct.productPrice" name="price" required />

      <label>Category:</label>
      <input type="text" [(ngModel)]="selectedProduct.productCategory" name="category" required />

      <label>Quantity:</label>
      <input type="number" [(ngModel)]="selectedProduct.productQuantity" name="quantity" required />

      <label>Image URL:</label>
      <input type="text" [(ngModel)]="selectedProduct.productImageURL" name="image" required />

      <div class="modal-actions">
        <button type="submit" class="btn save-btn">Save</button>
        <button type="button" class="btn cancel-btn" (click)="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>